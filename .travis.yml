sudo: false
cache:
  directories:
    - $HOME/.cache/pip
language: python

branches:
  only:
  - master
  - v0.2.1-dev

matrix:
  include:
    - python: "2.7"
      env: TOXENV=py27
    - python: "3.4"
      env: TOXENV=py34
    - python: "3.5"
      env: TOXENV=py35
    - python: "3.6"
      env: TOXENV=py36
    - python: "pypy"
      env: TOXENV=pypy

    # Meta
    - python: "3.6"
      env: TOXENV=flake8
    - python: "3.6"
      env: TOXENV=manifest
    - python: "3.6"
      env: TOXENV=docs

before_install:
- pip install codecov
install:
- pip install tox
script:
- tox --hashseed 0 -e $TOXENV
after_success:
- codecov
notifications:
  email: false
  irc: "chat.freenode.net#ramlfications"
  slack:
    secure: TWn+jseoa8McZptuY7Zr/2AkrWKd9tSmvCoCszYkGHyHp+PAdnxH96Wxweq4pL1A1QoMtsgYM5dhPEPUfV9xCRN1FU6OMPtchMjgC740vqNsLE0+cjz6We3COw9+BHoLk7Nh2SgAzjxS9X+0Bv6tDBf1CvA7SIyM1ssLQifnX+M=
deploy:
  provider: pypi
  user: roguelynn
  password:
    secure: XgUz7PiCHCOVM1yZeNfuy2j73aAGpW5HtTocmjlKNqG9wKXGkqV4IFWneznE1n8hqQj+Tqmm4MQ0AftJcomEh9WESVsglwMOqwMericRcsVkrEq+XHPynMfqsUc/MEr+zAB/Tj9SsbYMjP8zsk4TdJx/s+EbYFXsDfHrxcQY6q4=
  on:
    tags: true
  distributions: sdist bdist_wheel
